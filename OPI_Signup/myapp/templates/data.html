<!DOCTYPE html>
<html lang="en" style=>
<head>
    {% load static %}
    <link rel="stylesheet" type="text/css" href='{% static 'mystyle.css' %}?{% now "U" %}'>
    <!-- <script type="module" src='{% static 'js/data.mjs' %}?{% now "U" %}'></script> -->
    <!-- <script type="javascript" src="data.js"></script> -->
    <link rel="shortcut icon" type="image/png" href='{% static 'favicon.ico' %}?{% now "U" %}'>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPI Data</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    {{ form.media }}
    </script>
</head>

<body class="overflow">
    <div class="topnav" style="justify-content: left; background-color: #002E5D;">
        <a aria-label="home page" href="https://byu.edu" target="_blank" data-cms-ai="0" style="display: flex; justify-content: center; padding-top: 14px; margin-left: 10px;">
            <img class="PageLogo-image" style="max-width:80%; "src="https://brightspotcdn.byu.edu/e4/0a/b679ee0a41d9b1675fc78cd03239/byu-logo-white-small.svg" alt="BYU">
            <div style="margin: 12px;"></div>
            <div class="mx-name-container15" style="margin-right: 10px; border-right: 1px solid rgb(0, 87, 184); height: 100%;"></div>
        </a>
        <div class="header-divider"></div>
        <div class="header">
            <a style="font-size:22px; text-align: left; text-decoration: none; color:#ffffff; padding-bottom: 3px; padding-top: 14px;" href="https://humanities.byu.edu" target="_blank" data-cms-ai="0">College of Humanities</a>
            <a style="font-size:28px; font-weight:500px; text-decoration: none; color:#ffffff; padding-top: 3px;" href="http://cls.byu.edu/" target="_blank" data-cms-ai="0">Center for Language Studies</a>
        </div>
    </div>
    <div class="mainbox">
        <form method="post" id="form_id" style="padding-left:0%;">
            {% csrf_token %}
            {% if messages %}
            {% for message in messages %}
            <div class= 'alert'>
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
            <div class="container">
                <div class="button_justify" style="margin-top: 2vw;">
                    <div class="form-group col-md-3">
                      <select name="search_select1" id="search_select1" class="form-control form-control-sm">
                        <option value="FirstName">First Name</option>
                        <option value="LastName">Last Name</option>
                        <option value="BYUID">BYU ID</option>
                        <option value="NETID">Net ID</option>
                        <option value="Reason">Reason</option>
                        <option value="EntryDate">Entry Date</option>
                        <option value="Language">Language</option>
                        <option value="LanguageOther">Language Other</option>
                        <option value="Approved">Approved</option>
                        <option value="TestScheduled">Test Scheduled</option>
                      </select>
                    </div>
                    <div class="form-group col-md-3">
                      <input name="search_input1" id="search_input1" class="form-control form-control-sm" style="margin-right: 5px;">
                    </div>
                    <div class="form-group col-md-3">
                      <select name="search_select2" id="search_select2" class="form-control form-control-sm">
                        <option value="LastName">Last Name</option>
                        <option value="FirstName">First Name</option>
                        <option value="BYUID">BYU ID</option>
                        <option value="NETID">Net ID</option>
                        <option value="Reason">Reason</option>
                        <option value="EntryDate">Entry Date</option>
                        <option value="Language">Language</option>
                        <option value="LanguageOther">Language Other</option>
                        <option value="Approved">Approved</option>
                        <option value="TestScheduled">Test Scheduled</option>
                      </select>
                    </div>
                    <div class="form-group col-md-3">
                      <input name="search_input2" id="search_input2" class="form-control form-control-sm" style="margin-right: 5px;">
                    </div>
                    <div class="form-group col-md-3">
                      <select name="search_select3" id="search_select3" class="form-control form-control-sm">
                        <option value="BYUID">BYU ID</option>
                        <option value="FirstName">First Name</option>
                        <option value="LastName">Last Name</option>
                        <option value="NETID">Net ID</option>
                        <option value="Reason">Reason</option>
                        <option value="EntryDate">Entry Date</option>
                        <option value="Language">Language</option>
                        <option value="LanguageOther">Language Other</option>
                        <option value="Approved">Approved</option>
                        <option value="TestScheduled">Test Scheduled</option>
                      </select>
                    </div>
                    <div class="form-group col-md-3">              
                      <input name="search_input3" id="search_input3" class="form-control form-control-sm" style="margin-right: 5px;">
                    </div>
                </div>
              </div>
            
              <div class="d-flex flex-wrap justify-content-center">
                <button type="form" name="search" class="btn mx-2 my-1">
                  <span class="text-truncate">Search</span>
                </button>
                <button type="form" name="update" class="btn mx-2 my-1">
                  <span class="text-truncate">Update</span>
                </button>
                <button type="form" name="approval" class="btn mx-2 my-1" style="font-size: 0.65rem;">
                  <span class="text-truncate btn-block">Need Approval</span>
                </button>
                <button type="button" class="btn mx-2 my-1 popupbtn" style="font-size: 0.7rem;">
                  <span class="text-truncate">Create Record</span>
                </button>
                <button type='button' class="btn mx-2 my-1" onclick="show_all()" style="font-size: 0.7rem;">
                  <span class="text-truncate btn-block">Show All Data</span>
                </button>
                <button type="form" name="delete" class="btn btn-danger mx-2 my-1">
                  <span class="text-truncate">Delete</span>
                </button>
              </div>

              <div class="container" style="border-color: #002E5D;">
                <div class="row justify-content-center">
                  <div class="col-md-6">
                    <div class="popup-wrapper" style="display:none;">
                      <div class="popup">
                        <div class="popup-close" style="color: red; cursor: pointer;">X</div>
                        <div class="popup-content">
                          <h1>Create Student Record</h1>
                            <div>
                                <label>First Name</label>
                                <input name="first_name" class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Last Name</label>
                                <input name="last_name" class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>BYU ID</label>
                                <input name="byuid" class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Net ID</label>
                                <input name="netid" class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Test Request Submitted</label>
                                <select name="test_request" class="form-control form-control-sm">
                                    <option>No</option>
                                    <option>Yes</option>
                                </select>                              </div>
                            <div>
                                <label>Approved</label>
                                <select name="approved" class="form-control form-control-sm">
                                    <option>No</option>
                                    <option>Yes</option>
                                </select>                              </div>
                            <div>
                                <label>Email Sent</label>
                                <select name="email_sent" class="form-control form-control-sm">
                                    <option>No</option>
                                    <option>Yes</option>
                                </select>                              </div>
                            <div>
                                <label>Reason</label>
                                <input name="reason" value='Language Certificate' class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Language</label>
                                <select name="language" class="form-control form-control-sm">
                                    <option>Arabic</option>
                                    <option>Cebuano</option>
                                    <option>Danish</option>
                                    <option>Dutch</option>
                                    <option>English</option>
                                    <option>Finnish</option>
                                    <option>French</option>
                                    <option>Mandarin</option>
                                    <option>German</option>
                                    <option>Indonesian</option>
                                    <option>Italian</option>
                                    <option>Japanese</option>
                                    <option>Korean</option>
                                    <option>Norwegian</option>
                                    <option>Portuguese</option>
                                    <option>Russian</option>
                                    <option>Spanish</option>
                                    <option>Tagalog</option>
                                    <option>Thai</option>
                                    <option>Vietnamese</option>
                                    <option>Haitian Creole</option>
                                    <option>Other</option>
                                </select>
                            </div>
                            <div>
                                <label>Language Other</label>
                                <input name="language_other" class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Test Date 1</label>
                                <input name="test_date1" type='date' class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Time 1</label>
                                <input name="time1" type='time' class="form-control form-control-sm" min="08:00" max="17:00" value= '08:00'>
                            </div>
                            <div>
                                <label>Time 2</label>
                                <input name="time2" type='time' class="form-control form-control-sm" min="08:00" max="17:00" value= '11:00'>
                            </div>
                            <div>
                                <label>Test Date 2</label>
                                <input name="test_date2" type='date' class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Time 3</label>
                                <input name="time3" type='time' class="form-control form-control-sm" min="08:00" max="17:00" value= '08:00'>
                            </div>
                            <div>
                                <label>Time 4</label>
                                <input name="time4" type='time' class="form-control form-control-sm"min="08:00" max="17:00" value= '11:00'>
                            </div>
                            <div>
                                <label>Phone</label>
                                <input name="phone" class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Previous Experience</label>
                                <select name="experience" class="form-control form-control-sm">
                                    <option>Mission</option>
                                    <option>Native Speaker</option>
                                    <option>Heritage Speaker</option>
                                    <option>Beginner</option>
                                    <option>Professional</option>
                                    <option>University</option>
                                </select>
                            </div>
                            <div>
                                <label>Major</label>
                                <input name="major" class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Second Major</label>
                                <input name="second_major" class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Minor</label>
                                <input name="minor"  class="form-control form-control-sm">
                            </div>
                            <div>
                                <label>Come To Campus</label>
                                <select name="come_to_campus" class="form-control form-control-sm">
                                    <option>Yes</option>
                                    <option>No</option>
                                </select>                            
                            </div>
                            <div>
                                <label>If they cannot come, why?</label>
                                <input name="cannot_come" class="form-control form-control-sm">
                            </div>
                            <button type="form" name="create_record" id="create_record" class="btn mx-2 my-1 popup-close" style="font-size: 0.7rem;">
                                <span class="text-truncate">Create Record</span>
                              </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <div style="width: 100vw; overflow-x: scroll; padding: 1vw;">
            <table class="styled-table">
                {% for x in total %}
                <button type='button'>{{ x }} </button>

                {% endfor %}
                <thead>
                    <tr>
                        <th>Select Records<input type="checkbox" id="select_all" ></th>
                        <th id = '0' onclick="thing(this.getAttribute('id'))">Taken Test</th>
                        <th id = '1' onclick="thing(this.getAttribute('id'))">Test Request Submitted</th>
                        <th id = '2' onclick="thing(this.getAttribute('id'))">Approved</th>
                        <th id = '3' onclick="thing(this.getAttribute('id'))">Entry Date</th>
                        <th id = '4' onclick="thing(this.getAttribute('id'))">Entry Time</th>
                        <th id = '5' onclick="thing(this.getAttribute('id'))">First Name</th>
                        <th id = '6' onclick="thing(this.getAttribute('id'))">Last Name</th>
                        <th id = '7' onclick="thing(this.getAttribute('id'))">BYU ID</th>
                        <th id = '8' onclick="thing(this.getAttribute('id'))">Net ID</th>
                        <th id = '9' onclick="thing(this.getAttribute('id'))">Email</th>
                        <th id = '10' onclick="thing(this.getAttribute('id'))">Reason</th>
                        <th id = '11' onclick="thing(this.getAttribute('id'))">Language</th>
                        <th id = '12' onclick="thing(this.getAttribute('id'))">Language Other</th>
                        <th id = '13' onclick="thing(this.getAttribute('id'))">Previous Experience</th>
                        <th id = '14' onclick="thing(this.getAttribute('id'))">Major</th>
                        <th id = '15' onclick="thing(this.getAttribute('id'))">Second Major</th>
                        <th id = '16' onclick="thing(this.getAttribute('id'))">Minor</th>
                        <th id = '17' onclick="thing(this.getAttribute('id'))">Come To Campus</th>
                        <th id = '18' onclick="thing(this.getAttribute('id'))">Cannot Come</th>
                        <th id = '19' onclick="thing(this.getAttribute('id'))">Test Date 1</th>
                        <th id = '20' onclick="thing(this.getAttribute('id'))">Test Date 2</th>
                        <th id = '21' onclick="thing(this.getAttribute('id'))">Time 1</th>
                        <th id = '22' onclick="thing(this.getAttribute('id'))">Time 2</th>
                        <th id = '23' onclick="thing(this.getAttribute('id'))">Time 3</th>
                        <th id = '24' onclick="thing(this.getAttribute('id'))">Time 4</th>
                        <th id = '25' onclick="thing(this.getAttribute('id'))">Confirm Email</th>
                        <th id = '26' onclick="thing(this.getAttribute('id'))">Phone</th>
                        <th id = '27' onclick="thing(this.getAttribute('id'))">Email Sent</th>
                    </tr>
                </thead>
                <tbody>
                    {% for num_students in data %}
                    {% if num_students == 'all_students' %}

                    {% for item in person %}
                    <tr>
                        <td><input type="checkbox" class="check_box" name="check_box"></td>
                        <!-- onchange="document.getElementById('update_form').submit()" -->
                        {% for v in item %}
                        <td class="data_box"><input style='width:8vw;' class="data" value= "{{ v }}"></td>
                        {% endfor %}
                    </tr>
                    {% endfor %}

                    {% else %}
                    <td><input type="checkbox" name="check_box" class="check_box"></td>
                    {% for item in person %}
                    <td class="data_box"><input style='width:8vw;' class="data" value= "{{ item }}"></td>
                    {% endfor %}

                    {% endif %}
                    {% endfor %}

                </tbody>
            </table>
            </div>
        </form>
        <script title="give names">
            function create_names() {
                var cls = document.getElementsByClassName("check_box"); 
                for (n=0, length = cls.length; n < length; n++) {
                    cls[n].name= "check_box" + (n); 
                }
                var data = document.getElementsByClassName("data");
                var data_box = document.getElementsByClassName("data_box"); 
 
                for (n=0, length = data.length; n < length; n++) {
                    data[n].name= "data" + (n); 
                    data[n].id= "data" + (n); 
                    data_box[n].name= "data" + (n); 
                    data_box[n].id= "data" + (n); 

                }

            }; 
            create_names()
        </script>
        <script>

            //src="jquery-3.6.1.min.js">
            var select_all_box = document.getElementById('select_all')
                select_all_box.addEventListener('change', function handleClick() {
                    var boxes = document.querySelectorAll('.check_box');
                    if (select_all_box.checked) {
                        //$(".check_box").attr("checked", "true")
                        boxes.forEach((check_box) => {
                        check_box.setAttribute('checked', `true`);
                        });
                    } else {
                        //$(".check_box").attr("checked", "false")
                        boxes.forEach((check_box) => {
                        check_box.removeAttribute('checked');
                        });
                    }
            });
 

        </script>

        <script>
            function thing(id){
                const _id = id
                let thing = document.getElementById(id)
                    thing.style.display = 'none'
                let data = document.getElementById(`data${id}`)
                
                var num_data = document.getElementsByClassName("data");

                visibility(id, num_data)
                }

            function visibility(id, num_data){
                for (n=0; n <= num_data.length; n++){
                    if (n == id){
                        document.getElementById("data"+n).style.display = 'none'
                    }
                    else if ((n-id) % 28 == 0){
                        document.getElementById("data"+n).style.display = 'none'
                    }
                }
            }
        </script>

        <script>
            function starting_visibility(_array){
                _array = [4, 9, 13, 14, 15, 16, 17, 18, 25]
                for (let i = 0; i < _array.length; i++){
                    document.getElementById(_array[i]).style.display = 'none'
                    
                    var num_data = document.getElementsByClassName("data");

                    for (n=0; n <= num_data.length; n++){
                        if (n == _array[i]){
                                document.getElementById("data"+n).style.display = 'none'
                            }
                            else if ((n-_array[i]) % 28 == 0){
                                document.getElementById("data"+n).style.display = 'none'
                            }
                    }

                }
            }
            starting_visibility()
        </script>

        <script>
            function show_all(){
                _array = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27]
                for (let i = 0; i < _array.length; i++){
                    show_column(_array[i])

                }
                data_boxes = document.getElementsByClassName('data_box')
                var i;
                for (i = 0; i < data_boxes.length; i++) {
                    data_boxes[i].style.display = 'table-cell';
                }
            }


            function show_column(id){
            const _id = id
            let thing = document.getElementById(id)
                thing.style.display = 'table-cell'                
            }


        </script>

        <script>
            const popupbtn = document.querySelector('.popupbtn');

            const popup = document.querySelector('.popup-wrapper');

            const popupclose = document.querySelector('.popup-close');

            // popup

            popupbtn.addEventListener('click',() =>{

                popup.style.display = "block";

                console.log("opening modal");

            });

            popupclose.addEventListener('click', () => {

                popup.style.display = 'none';

            });
        </script>
    </body>